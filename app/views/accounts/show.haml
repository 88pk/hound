= render 'shared/header'

%section.account-section
  %h2.label-text Your monthly cost

  .account-content.account-breakdown
    %table
      %thead
        %tr
          %th.label-text Description
          %th.label-text Base Cost
          %th.label-text Quantity
          %th.label-text Subtotal
        - @repo_groups.each do |repo_group|
          %tr
            - if repo_group.any?
              %td
                = repo_group.first.plan_type.titleize
              %td $#{repo_group.first.plan_price}/mo
              %td x#{repo_group.count}
              %td #{repos_total(repo_group)}
    %dl
      %dt.label-text Total Monthly Cost
      %dd #{repos_total(@repo_groups.flatten)}

%section.account-section
  %h2.label-text Active private repos billed to you

  .account-content.repos-breakdown
    - if @subscribed_repos.any?
      %ul.private-repos
        - @subscribed_repos.each do |repo|
          %li.repo
            %span.repo-name{ "ng-class" => "{private: #{repo.private}}" }
              = repo.full_github_name
    - else
      %p.empty-state-message
        You have no private repos billed to you
